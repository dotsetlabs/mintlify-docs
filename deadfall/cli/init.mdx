---
title: init
description: 'Create a deadfall.yaml config file'
---

# deadfall init

Generate a Deadfall configuration file with sensible defaults.

## Usage

```bash
deadfall init [options]
```

## Options

| Option | Description | Default |
|:-------|:------------|:--------|
| `-o, --output <file>` | Output file path | `./deadfall.yaml` |
| `--servers <names>` | Comma-separated server names | Interactive |
| `--alerts <types>` | Alert channels: `slack`, `email`, `webhook` | Interactive |
| `-y, --yes` | Accept all defaults | `false` |
| `--minimal` | Generate minimal config | `false` |

## Examples

### Interactive Mode

```bash
$ deadfall init

Deadfall Configuration Generator
================================

? Which MCP servers do you want to monitor?
  ◉ postgres-mcp
  ◯ filesystem-mcp
  ◉ github-mcp

? Which detection types do you want to enable?
  ◉ Volume spikes
  ◉ Off-hours activity
  ◉ New patterns
  ◯ Sequence detection

? Where should alerts be sent?
  ◉ Slack
  ◯ Email
  ◯ Webhook

? Slack webhook URL: https://hooks.slack.com/...
? Slack channel: #security-alerts

✓ Configuration written to deadfall.yaml
```

### Non-Interactive

```bash
# Generate with defaults
deadfall init -y

# Specify servers
deadfall init --servers postgres-mcp,filesystem-mcp -y

# Minimal config
deadfall init --minimal -o deadfall.yaml
```

## Generated Config

### Full Config

```yaml
# deadfall.yaml
# Generated by deadfall init

monitors:
  - server: postgres-mcp
    baseline: auto
    alerts:
      - type: volume_spike
        threshold: 3x
      - type: off_hours
        schedule: "9am-6pm weekdays"
      - type: new_patterns

  - server: filesystem-mcp
    baseline: auto
    alerts:
      - type: volume_spike
        threshold: 5x
      - type: sensitive_paths
        patterns:
          - "**/.env*"
          - "**/secrets/**"

alerts:
  slack:
    webhook: ${SLACK_WEBHOOK_URL}
    channel: "#security-alerts"
    severity: medium+

logging:
  level: info
  file: ~/.dotset/deadfall/activity.db
  retention: 30d
```

### Minimal Config

```yaml
# deadfall.yaml (minimal)
monitors:
  - server: "*"
    baseline: auto

alerts:
  console:
    severity: high
```

## Environment Variables

The generated config uses environment variable placeholders:

| Variable | Description |
|:---------|:------------|
| `SLACK_WEBHOOK_URL` | Slack incoming webhook URL |
| `SMTP_HOST` | Email server hostname |
| `SMTP_USER` | Email username |
| `SMTP_PASS` | Email password |

Set these before running `deadfall watch`:

```bash
export SLACK_WEBHOOK_URL="https://hooks.slack.com/services/..."
deadfall watch
```

## Next Steps

After generating your config:

1. **Review and customize** the detection rules
2. **Set environment variables** for alert channels
3. **Start monitoring**: `deadfall watch`
4. **Review baseline** after learning period
