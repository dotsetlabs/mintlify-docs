---
title: VS Code Extension
description: 'Use Tollgate with the VS Code extension for visual approval management'
---

# VS Code Extension

The Tollgate VS Code extension provides a visual interface for managing MCP security approvals directly within your editor. Instead of terminal prompts, you get a sidebar UI with pending approvals, session management, and audit logging.

## Prerequisites

- VS Code 1.85+ or Cursor (which is based on VS Code)
- Node.js 20+ installed
- A Tollgate configuration file (`tollgate.yaml`)

## Installation

Install the extension from the VS Code marketplace:

1. Open VS Code or Cursor
2. Go to Extensions (Cmd+Shift+X on macOS)
3. Search for "Tollgate"
4. Click Install

Or install via command line:

```bash
code --install-extension dotsetlabs.tollgate
```

## Quick Start

### 1. Create a Tollgate Configuration

Create a `tollgate.yaml` in your project root:

```yaml
version: "1"

defaults:
  action: prompt
  timeout: 60000

servers:
  filesystem:
    command: "npx"
    args: ["-y", "@anthropic/mcp-server-filesystem", "./"]
    tools:
      "read_*": { action: allow }
      "write_*": { action: prompt }
      "delete_*": { action: deny }

approval:
  method: vscode
```

<Note>
The `approval.method: vscode` setting tells Tollgate to send approval requests to the VS Code extension instead of the terminal.
</Note>

### 2. Start Tollgate

Click the Tollgate icon in the activity bar (left sidebar), then click "Start Tollgate" in the status bar or use the Command Palette:

1. Press Cmd+Shift+P (macOS) or Ctrl+Shift+P (Windows/Linux)
2. Type "Tollgate: Start Tollgate"
3. Press Enter

The extension will automatically detect your `tollgate.yaml` and start the proxy.

### 3. Configure Your MCP Client

Update your MCP client (Cursor, Claude Desktop, etc.) to connect through Tollgate. The extension manages the Tollgate process, so you only need to point your client to the proxy.

## Features

### Sidebar Approval Panel

When an MCP server requests a tool call, an approval request appears in the Tollgate sidebar:

- **Server name** and **tool name** clearly displayed
- **Risk level** with color coding (green=safe, yellow=write, red=dangerous)
- **Arguments** preview showing what the tool will do
- **Session options** for one-click approval with memory

### Status Bar Indicator

The status bar shows:

- **Tollgate: Stopped** — Click to start
- **Tollgate: Ready** — Tollgate is running and connected
- **Tollgate: 2 pending** — Pending approval requests (click to view)

### Keyboard Shortcuts

| Shortcut | Action |
|----------|--------|
| Cmd+Shift+Y | Quick approve (uses default session duration) |
| Cmd+Shift+N | Quick deny |
| Cmd+Shift+5 | Approve for 5 minutes |

### Session Approval Options

When approving a request, choose how long to remember the approval:

- **Once** — Approve this specific request only
- **5 minutes** — Auto-approve similar requests for 5 minutes
- **15 minutes** — Auto-approve for 15 minutes
- **30 minutes** — Auto-approve for 30 minutes
- **Session** — Auto-approve until VS Code restarts

### Protected Servers View

See all configured MCP servers and their status:

- Server name and connection status
- Tool call count and denied count
- Health status monitoring

### Activity Log

View recent tool calls and their outcomes:

- Timestamp and server/tool name
- Policy decision (allowed, prompted, denied)
- User decision for prompted requests

## Configuration

### Extension Settings

Configure the extension in VS Code settings:

```json
{
  "tollgate.autoStart": true,
  "tollgate.showStatusBar": true,
  "tollgate.notifyOnApproval": "dangerous",
  "tollgate.defaultSessionDuration": "5min",
  "tollgate.ipcPort": 9848
}
```

| Setting | Description | Default |
|---------|-------------|---------|
| `autoStart` | Start Tollgate when workspace opens | `false` |
| `showStatusBar` | Show status bar indicator | `true` |
| `notifyOnApproval` | Popup notifications: `all`, `dangerous`, `none` | `dangerous` |
| `defaultSessionDuration` | Default for quick approve | `5min` |
| `ipcPort` | WebSocket port for CLI communication | `9848` |

### Tollgate Configuration

In your `tollgate.yaml`, set the approval method:

```yaml
approval:
  method: vscode
  timeout: 60000  # Optional: override default timeout
```

## Example Workflow

1. **Start coding** — The extension detects your `tollgate.yaml`
2. **AI makes a request** — Claude or Cursor's AI calls an MCP tool
3. **Review in sidebar** — The request appears with risk assessment
4. **Approve with session** — Click "Allow 5min" for similar operations
5. **Continue working** — Future similar requests auto-approve

## Using with Cursor

Cursor is based on VS Code and supports the same extensions. The Tollgate extension works identically in Cursor:

1. Install the extension in Cursor
2. Create `tollgate.yaml` in your project
3. Use the Tollgate sidebar to manage approvals

<Tip>
With Cursor, you can use the Tollgate extension to see exactly what tools Claude is calling and approve them visually, rather than hunting for terminal prompts.
</Tip>

## Commands

Access these via Command Palette (Cmd+Shift+P):

| Command | Description |
|---------|-------------|
| Tollgate: Start Tollgate | Start the Tollgate proxy |
| Tollgate: Stop Tollgate | Stop the Tollgate proxy |
| Tollgate: Restart Tollgate | Restart the proxy |
| Tollgate: Quick Approve | Approve current pending request |
| Tollgate: Quick Deny | Deny current pending request |
| Tollgate: Allow for 5 Minutes | Approve with 5-minute session |
| Tollgate: View Audit Log | Open audit log viewer |
| Tollgate: Open Configuration | Open tollgate.yaml |
| Tollgate: Show Output | Show Tollgate output channel |

## Troubleshooting

### Extension not connecting

1. Check that Tollgate is running (status bar shows "Ready")
2. Verify `approval.method: vscode` in your config
3. Check the Tollgate output channel for errors

### Approvals not appearing

1. Ensure the extension is installed and enabled
2. Check that the sidebar is visible (click Tollgate icon)
3. Verify the policy requires prompting (`action: prompt`)

### Process won't start

1. Check that Node.js 20+ is installed
2. Verify `tollgate.yaml` exists and is valid: `tollgate validate`
3. Check the output channel for error messages

### Port conflict

If port 9848 is in use:

1. Change `tollgate.ipcPort` in VS Code settings
2. Or stop other Tollgate instances
