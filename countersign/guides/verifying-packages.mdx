---
title: Verifying Packages
description: How to verify MCP server packages before installation
---

# Verifying Packages

This guide shows you how to use Countersign to verify MCP server packages before installing them.

## Why Verify?

MCP servers run with significant privileges:

- File system access
- Command execution
- Network requests
- Database connections

A malicious MCP server could compromise your entire development environment. Verification ensures you're installing what you think you're installing.

## Quick Start

```bash
# Install Countersign
go install github.com/dotsetlabs/countersign/cmd/countersign@latest

# Verify before installing
countersign verify @modelcontextprotocol/server-filesystem

# If verification passes, install
npm install @modelcontextprotocol/server-filesystem
```

## Understanding Output

### High Trust (Safe to Install)

```bash
$ countersign verify @modelcontextprotocol/server-filesystem

âœ“ @modelcontextprotocol/server-filesystem@1.0.0
  Trust Score: 92/100 (HIGH) ðŸŸ¢
  Publisher: anthropic (verified)
  Signature: Valid (SIGSTORE)
  Provenance: Full build chain verified
```

### Medium Trust (Review First)

```bash
$ countersign verify @someorg/mcp-server

âš  @someorg/mcp-server@2.1.0
  Trust Score: 65/100 (MEDIUM) ðŸŸ¡
  Publisher: someorg (not verified)
  Signature: Valid (SIGSTORE)
  Provenance: Source linked, no build attestation

  Recommendation: Review source code before installing
```

### Low Trust (Exercise Caution)

```bash
$ countersign verify @unknown/sketchy-server

âš  @unknown/sketchy-server@0.1.0
  Trust Score: 25/100 (LOW) ðŸŸ 
  Publisher: unknown-user
  Signature: None
  Provenance: None

  Warning: No provenance information available
  Recommendation: Do not install without manual review
```

## Detailed Analysis

Get a full breakdown of the trust score:

```bash
countersign verify --detailed @example/mcp-server
```

```
@example/mcp-server@1.0.0

Trust Score Breakdown:
  â”œâ”€ Publisher Reputation    30/40
  â”‚    â”œâ”€ Verified org: No
  â”‚    â”œâ”€ 2FA enabled: Yes
  â”‚    â””â”€ Account age: 2 years
  â”œâ”€ Signature Status        25/25
  â”‚    â””â”€ SIGSTORE signature valid
  â”œâ”€ Provenance Data         15/20
  â”‚    â”œâ”€ Source: github.com/example/mcp-server
  â”‚    â””â”€ Build attestation: Missing
  â””â”€ Package Hygiene         8/15
       â”œâ”€ Dependencies: 5
       â””â”€ Install scripts: Yes (postinstall)

Overall: 78/100 (MEDIUM) ðŸŸ¡

Package Analysis:
  â”œâ”€ postinstall script found - review recommended
  â””â”€ 5 dependencies (2 with known vulnerabilities)
```

## Batch Verification

Verify multiple packages at once:

```bash
# From a list
countersign verify @mcp/server-a @mcp/server-b @mcp/server-c

# From package.json dependencies
countersign verify --from-package ./package.json

# All MCP servers in your Claude config
countersign verify --from-config ~/.config/claude/mcp.json
```

## Automating Verification

### Pre-install Hook

Add to your `package.json`:

```json
{
  "scripts": {
    "preinstall": "countersign verify $(npm pack --dry-run --json | jq -r '.[].name')"
  }
}
```

### npm Hook

Create `~/.npmrc`:

```ini
preinstall=countersign verify $npm_package_name
```

### CI/CD Gate

```yaml
# .github/workflows/verify.yml
verify-mcp:
  runs-on: ubuntu-latest
  steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-go@v5
      with:
        go-version: '1.22'
    - name: Verify MCP servers
      run: |
        go install github.com/dotsetlabs/countersign/cmd/countersign@latest
        countersign verify --from-package package.json --min-score 70
```

## Handling Failures

### No Provenance

```bash
$ countersign verify @unknown/server
âœ— No provenance information found
```

Options:
1. Contact the maintainer to add signing
2. Manually review the source code
3. Choose a different package
4. Accept the risk (not recommended)

### Signature Invalid

```bash
$ countersign verify @example/server
âœ— Signature verification failed
```

This could indicate:
- Package was tampered with
- Registry returned different content
- Signing certificate expired

**Do not install** - report to the maintainer.

### Score Below Threshold

```bash
$ countersign verify --min-score 80 @example/server
âœ— Trust score 65 below threshold 80
```

Either:
- Lower your threshold: `--min-score 60`
- Review the detailed output to understand why
- Choose a more trusted package

## Best Practices

1. **Always verify before installing MCP servers**
2. **Set organizational minimums**: `--min-score 70` for production
3. **Trust known publishers**: `countersign trust add anthropic`
4. **Review detailed output** for MEDIUM scores
5. **Never install** packages with CRITICAL (0-19) scores
