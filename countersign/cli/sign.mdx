---
title: countersign sign
description: Sign packages for distribution
---

# countersign sign

Sign your MCP server packages with cryptographic signatures for provenance verification.

## Usage

```bash
countersign sign [directory] [options]
```

## Arguments

| Argument | Description |
| -------- | ----------- |
| `directory` | Path to package directory (default: current directory) |

## Options

| Option | Description |
| ------ | ----------- |
| `--identity <email>` | OIDC identity for signing |
| `--provider <name>` | OIDC provider: `github`, `google`, `microsoft` |
| `--output <path>` | Output path for signature bundle |
| `--dry-run` | Validate without signing |

## How It Works

Countersign uses SIGSTORE for keyless signing:

1. Authenticate with your OIDC provider (GitHub, Google, etc.)
2. Generate an ephemeral signing key
3. Sign the package contents
4. Submit signature to Rekor transparency log
5. Embed provenance in package

## Examples

### Sign with GitHub Identity

```bash
# Sign using your GitHub identity
countersign sign --provider github

# This will:
# 1. Open browser for GitHub OAuth
# 2. Sign the package
# 3. Create .sigstore/ directory with signatures
```

### Sign for npm Publish

```bash
# Sign before publishing
countersign sign ./dist
npm publish ./dist
```

### Dry Run

```bash
# Validate package without signing
countersign sign --dry-run
```

## Output Files

After signing, you'll have:

```
your-package/
├── package.json
├── dist/
├── .sigstore/
│   ├── signature.sig      # Package signature
│   ├── certificate.pem    # Signing certificate
│   └── rekor-entry.json   # Transparency log entry
```

## CI/CD Integration

### GitHub Actions

```yaml
- name: Sign package
  run: |
    npx @dotsetlabs/countersign sign --provider github
  env:
    GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

### GitLab CI

```yaml
sign:
  script:
    - npx @dotsetlabs/countersign sign --provider gitlab
```

## Requirements

- Node.js 18+
- Access to OIDC provider (GitHub, Google, Microsoft)
- Internet connection (for transparency log)
