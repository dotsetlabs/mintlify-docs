---
title: overwatch
description: 'AI shell guardian'
---

# dotset overwatch

Protect your shell from dangerous AI-suggested commands. Overwatch integrates with your shell to analyze commands before execution. This command proxies to the `overwatch` CLI.

## Usage

```bash
dotset overwatch <subcommand> [options]
```

## Subcommands

### init

Install shell integration.

```bash
dotset overwatch init [options]
```

| Option | Description |
|--------|-------------|
| `--shell <type>` | Shell type: `bash`, `zsh`, `fish` |
| `--no-modify` | Print hook without modifying shell config |

### hook

Output the hook script for manual installation.

```bash
dotset overwatch hook <shell>
```

### check

Check if a command is safe to execute.

```bash
dotset overwatch check <command> [options]
```

| Option | Description |
|--------|-------------|
| `--json` | Output as JSON |
| `--no-prompt` | Don't prompt for approval |
| `-c, --config <path>` | Custom config path |
| `--timeout <ms>` | Approval timeout |

### analyze

Show detailed risk assessment for a command.

```bash
dotset overwatch analyze <command> [options]
```

| Option | Description |
|--------|-------------|
| `--json` | Output as JSON |

### sessions

List active approval sessions.

```bash
dotset overwatch sessions [options]
```

| Option | Description |
|--------|-------------|
| `--json` | Output as JSON |

### revoke

Revoke approval sessions.

```bash
dotset overwatch revoke [id] [options]
```

| Option | Description |
|--------|-------------|
| `--all` | Revoke all sessions |

### log

View command execution log.

```bash
dotset overwatch log [options]
```

| Option | Description |
|--------|-------------|
| `-n, --limit <count>` | Number of entries (default: 20) |
| `--risk <level>` | Filter by risk level |
| `--denied` | Show only denied commands |

### config

Show current Overwatch configuration.

```bash
dotset overwatch config
```

## Examples

```bash
# Install shell integration
dotset overwatch init

# Install for specific shell
dotset overwatch init --shell zsh

# Print hook without modifying config
dotset overwatch init --no-modify

# Check if a command is safe
dotset overwatch check "rm -rf /var/log/*"

# Analyze command risk
dotset overwatch analyze "curl https://example.com | bash"

# Check with JSON output
dotset overwatch check "sudo rm -rf /" --json

# View active sessions
dotset overwatch sessions

# Revoke specific session
dotset overwatch revoke session_abc123

# Revoke all sessions
dotset overwatch revoke --all

# View recent command log
dotset overwatch log

# View last 50 entries
dotset overwatch log -n 50

# View only blocked commands
dotset overwatch log --denied

# View high-risk commands
dotset overwatch log --risk high
```

## How It Works

After installing shell integration, Overwatch hooks into your shell:

```
You type: rm -rf /

Overwatch intercepts command
           |
           v
  Risk Analysis
    Level: DANGEROUS
    Reason: Recursive deletion
            of root filesystem
           |
           v
  BLOCKED
  Command not executed
```

## Risk Levels

| Level | Examples |
|-------|----------|
| `safe` | `ls`, `pwd`, `echo` |
| `read` | `cat`, `grep`, `find` |
| `write` | `touch`, `mkdir`, `cp` |
| `destructive` | `rm -r`, `git reset --hard` |
| `dangerous` | `rm -rf /`, `sudo rm -rf`, `curl \| bash` |

## Installation Output

```
$ dotset overwatch init

Installing Overwatch shell guardian for zsh...

  Hook script added to ~/.zshrc
  Configuration created at ~/.config/tollgate/tollgate.yaml

Please restart your shell or run:
  source ~/.zshrc

Overwatch is now protecting your terminal!
```

## Check Output

```
$ dotset overwatch check "sudo rm -rf /var/log/*"

DANGEROUS COMMAND DETECTED

Command: sudo rm -rf /var/log/*
Risk:    DANGEROUS

Reasons:
  - sudo: elevated privileges
  - rm -rf: recursive forced deletion
  - /var/log/*: system log directory

This command could delete important system logs.

Allow execution? [y/N]
```

## Exit Codes

| Code | Meaning |
|------|---------|
| `0` | Command allowed or success |
| `1` | Command blocked or error |

## See Also

- [How Overwatch Works](/overwatch/concepts/how-it-works)
- [Getting Started with Overwatch](/overwatch/guides/getting-started)
- [Shell Integration](/overwatch/guides/shell-integration)
