---
title: dotset run
description: 'Run commands with multi-provider secret protection'
---

# dotset run

Run any command with secrets injected from multiple providers and output protection.

## Usage

```bash
dotset run [options] -- <command...>
```

<Note>
Use `--` to separate dotset options from your command.
</Note>

## Options

| Option | Description | Default |
|--------|-------------|---------|
| `-p, --providers <list>` | Comma-separated providers | `auto` |
| `-s, --scope <scope>` | Environment scope | `development` |
| `-m, --mode <mode>` | Protection mode | `detect` |
| `--redact-text <text>` | Replacement text | `[REDACTED]` |
| `-q, --quiet` | Suppress shield output | `false` |
| `--no-telemetry` | Disable cloud reporting | `false` |

## Secret Resolution

Shield aggregates secrets from configured providers. By default, it uses `auto` which attempts to detect all available sources.

### Supported Providers

- **dotenv**: Loads from `.env` and `.env.local`
- **environment**: Shell environment variables (prefixed with `SHIELD_`)
- **aws-sm**: AWS Secrets Manager
- **dotset**: Native encrypted storage

## Examples

### Zero-Setup (.env auto-detection)
```bash
dotset run -- npm start
```

### Explicit Providers
```bash
dotset run --providers dotenv,aws-sm -- node server.js
```

### With Redaction
```bash
dotset run --mode redact -- npm test
```

### Production Scope (Dotset Provider)
```bash
dotset run --scope production -- node server.js
```

## How It Works

1. **Resolution**: Aggregates secrets from all specified providers.
2. **Injection**: Injects discovered secrets into the child process environment.
3. **Redaction**: Intercepts `stdout`/`stderr` using a **streaming line-buffered engine**. This ensures secrets are caught even if split across output chunks.
4. **Flush**: Flushes any remaining buffered text before exiting.

## Exit Codes

The exit code matches your command's exit code. Shield itself never fails silently.

