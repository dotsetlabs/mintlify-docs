---
title: integrity
description: Monitor AI configuration file integrity
---

# hardpoint integrity

Monitor and verify the integrity of AI configuration files using cryptographic hashing.

## Overview

The `integrity` command provides file integrity monitoring for AI configuration files like `CLAUDE.md`, `.cursorrules`, and `mcp.json`. It creates a baseline of file hashes and can detect when files are modified, added, or removed.

This is useful for:
- Detecting unauthorized modifications to AI instructions
- Auditing changes to MCP server configurations
- Real-time monitoring with desktop notifications

## Usage

```bash
hardpoint integrity <subcommand> [flags]
```

## Subcommands

| Subcommand | Description |
| ---------- | ----------- |
| `init` | Initialize integrity baseline |
| `verify` | Verify files against baseline |
| `update` | Update baseline with current file states |
| `list` | List tracked files |
| `diff` | Show differences from baseline |
| `add` | Add files to baseline |
| `remove` | Remove files from baseline |
| `reset` | Remove baseline completely |
| `watch` | Watch for real-time changes |

---

## hardpoint integrity init

Initialize an integrity baseline by scanning for AI configuration files.

```bash
hardpoint integrity init [flags]
```

### Flags

| Flag | Description |
| ---- | ----------- |
| `--path` | Path to monitor (default: current directory) |
| `--patterns` | Custom file patterns to track (comma-separated) |
| `--force` | Overwrite existing baseline |

### Default Tracked Files

- `CLAUDE.md`, `AGENTS.md`
- `.cursorrules`, `.cursor/rules/*.mdc`
- `mcp.json`, `.mcp.json`
- `.github/copilot-instructions.md`
- `.aider*`
- `.continue/*.json`

### Examples

```bash
# Initialize baseline in current directory
hardpoint integrity init

# Initialize with custom path
hardpoint integrity init --path /path/to/project

# Track custom patterns
hardpoint integrity init --patterns "custom-ai.yaml,*.rules"

# Overwrite existing baseline
hardpoint integrity init --force
```

---

## hardpoint integrity verify

Verify tracked files against the baseline.

```bash
hardpoint integrity verify [flags]
```

### Flags

| Flag | Description |
| ---- | ----------- |
| `--path` | Path to verify (default: current directory) |
| `--json` | Output in JSON format |
| `--fail-on-change` | Exit with code 1 if changes detected |

### Examples

```bash
# Verify integrity
hardpoint integrity verify

# JSON output for scripting
hardpoint integrity verify --json

# Use in CI/CD (fails if changes detected)
hardpoint integrity verify --fail-on-change
```

### Example Output

```
Integrity Verification
======================

Status: MODIFIED

Modified files:
  - CLAUDE.md
    Old hash: a1b2c3...
    New hash: d4e5f6...
    Change: content modified

Added files:
  - .cursorrules (new file detected)

Summary: 1 modified, 1 added, 0 removed
```

---

## hardpoint integrity update

Update the baseline with current file states.

```bash
hardpoint integrity update [files...] [flags]
```

### Flags

| Flag | Description |
| ---- | ----------- |
| `--path` | Path to project (default: current directory) |

### Examples

```bash
# Update all tracked files
hardpoint integrity update

# Update specific files
hardpoint integrity update CLAUDE.md .cursorrules
```

---

## hardpoint integrity list

List all files tracked in the baseline.

```bash
hardpoint integrity list [flags]
```

### Flags

| Flag | Description |
| ---- | ----------- |
| `--path` | Path to project (default: current directory) |
| `--json` | Output in JSON format |

### Examples

```bash
# List tracked files
hardpoint integrity list

# JSON output
hardpoint integrity list --json
```

### Example Output

```
Tracked Files
=============

Path                  Size    Modified              Hash
----                  ----    --------              ----
CLAUDE.md             1.2KB   2025-01-08 10:30:00   a1b2c3d4...
.cursorrules          856B    2025-01-07 14:22:15   e5f6g7h8...
mcp.json              2.1KB   2025-01-06 09:15:30   i9j0k1l2...

Total: 3 files tracked
```

---

## hardpoint integrity diff

Show differences between baseline and current state.

```bash
hardpoint integrity diff [flags]
```

### Flags

| Flag | Description |
| ---- | ----------- |
| `--path` | Path to project (default: current directory) |

---

## hardpoint integrity add

Add new files to the baseline.

```bash
hardpoint integrity add <files...> [flags]
```

### Examples

```bash
# Add a custom configuration file
hardpoint integrity add custom-ai-rules.yaml

# Add multiple files
hardpoint integrity add file1.md file2.json
```

---

## hardpoint integrity remove

Remove files from the baseline.

```bash
hardpoint integrity remove <files...> [flags]
```

### Examples

```bash
# Remove a file from tracking
hardpoint integrity remove old-config.md
```

---

## hardpoint integrity reset

Remove the baseline file completely.

```bash
hardpoint integrity reset [flags]
```

### Flags

| Flag | Description |
| ---- | ----------- |
| `--path` | Path to project (default: current directory) |
| `--force` | Skip confirmation prompt |

---

## hardpoint integrity watch

Watch for real-time file changes with optional alerting.

```bash
hardpoint integrity watch [flags]
```

### Flags

| Flag | Description |
| ---- | ----------- |
| `--path` | Path to watch (default: current directory) |
| `--alert-desktop` | Show desktop notifications on changes |
| `--alert-webhook` | Send alerts to webhook URL |
| `--alert-log` | Log alerts to file |
| `--debounce` | Debounce interval for rapid changes (default: 500ms) |

### Examples

```bash
# Watch with desktop notifications
hardpoint integrity watch --alert-desktop

# Watch with Slack webhook
hardpoint integrity watch --alert-webhook https://hooks.slack.com/...

# Watch with logging
hardpoint integrity watch --alert-log /var/log/hardpoint-alerts.log

# Combine multiple alert methods
hardpoint integrity watch --alert-desktop --alert-log alerts.log
```

### Example Desktop Alert

```
Hardpoint Integrity Alert

File modified: CLAUDE.md
Type: content_modified
Time: 2025-01-08 15:30:45
```

---

## Storage

Integrity baselines are stored in `.hardpoint/integrity.json` within the project directory.

```json
{
  "version": "1.0",
  "created_at": "2025-01-08T10:00:00Z",
  "updated_at": "2025-01-08T15:30:00Z",
  "root_path": "/path/to/project",
  "patterns": ["CLAUDE.md", ".cursorrules", "mcp.json"],
  "files": {
    "CLAUDE.md": {
      "path": "CLAUDE.md",
      "hash": "a1b2c3d4e5f6...",
      "size": 1234,
      "mod_time": "2025-01-08T10:00:00Z",
      "permissions": "-rw-r--r--",
      "recorded_at": "2025-01-08T10:00:00Z"
    }
  }
}
```
