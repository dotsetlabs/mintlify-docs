---
title: "Active Probes Reference"
description: "Comprehensive guide to all supported Preflight probe types."
---

Probes are defined within the `variables` section of your `.preflight.yaml`.

```yaml
variables:
  VARIABLE_NAME:
    probe:
      type: probe_type
      timeout: 5000 # Optional, in ms
      target: "optional override"
```

## Database Probes

### PostgreSQL (`postgres`)
Verifies that the provided connection string is valid and that a `SELECT 1` query succeeds.

```yaml
DATABASE_URL:
  probe: { type: postgres }
```

### MongoDB (`mongodb`)
Verifies that the MongoDB client can connect and perform an admin `ping`. Supports standard and SRV connection strings.

```yaml
MONGODB_URI:
  probe: { type: mongodb }
```

## Cache Probes

### Redis (`redis`)
Verifies that the Redis server is reachable and responds to a `PING` command.

```yaml
REDIS_URL:
  probe: { type: redis }
```

## Cloud & API Probes

### AWS (`aws`)
Verifies that the AWS credentials in the environment (`AWS_ACCESS_KEY_ID`, etc.) are valid by calling `sts:GetCallerIdentity`.

```yaml
AWS_REGION:
  probe: { type: aws }
```

### HTTP/HTTPS (`http`)
Verifies that a URL is reachable. By default, it checks for a `2xx` response.

```yaml
STRIPE_API_ENDPOINT:
  probe:
    type: http
    target: "https://api.stripe.com/health"
    expectStatus: 200 # Optional
```

## Network Probes

### TCP (`tcp`)
A generic port-level connectivity check. Useful for internal services or protocols not yet natively supported.

```yaml
INTERNAL_SERVICE_HOST:
  probe:
    type: tcp
    target: "internal.svc.cluster.local:8080"
```

## Global Configuration

| Property | Description | Default |
| :--- | :--- | :--- |
| `type` | The type of probe to run. | (Required) |
| `timeout` | Max time in milliseconds to wait for a connection. | `5000` |
| `target` | Override the value used for the probe (e.g., if the variable is just a password). | `(Value of variable)` |
| `expectStatus`| The expected HTTP status code (for `http` probes only). | `2xx` |
